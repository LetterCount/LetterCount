<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SubliminalCode - Code Your Way.</title>
  <style>
    /* CSS Reset */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      overflow: hidden;
      display: flex;
      background-color: #1e1e1e;
      color: #ffffff;
    }

    #editor-container {
      flex: 1;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    #editor {
      flex: 1;
      background-color: #2d2d2d;
      color: #ffffff;
      font-size: 14px; /* Adjust as needed */
    }

    #file-selector {
      width: 200px;
      padding: 10px;
      background-color: #333333;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
      color: #ffffff;
      display: flex;
      flex-direction: column;
      align-items: center;
      border-radius: 5px;
      margin: 10px;
    }

    #file-selector label {
      margin-bottom: 5px;
    }

    #file-input {
      display: none;
    }

    #file-list {
      list-style: none;
      padding: 0;
      margin: 0;
      width: 100%;
    }

    .file-item {
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      background-color: #444444;
      margin-bottom: 5px;
      border-radius: 3px;
    }

    .file-item:hover {
      background-color: #555555;
    }

    .remove-button {
      background-color: #ff4444;
      color: #ffffff;
      border: none;
      padding: 4px 8px;
      border-radius: 3px;
      cursor: pointer;
      margin-left: 5px;
    }

    #credits {
      position: fixed;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      margin-bottom: 20px; /* Adjust as needed */
      color: #888888;
    }

    #export-button {
      margin-top: 10px;
      text-align: center;
    }

    #export-button button {
      background-color: #333333;
      color: #ffffff;
      padding: 8px 16px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
    }

    #export-button button:hover {
      background-color: #555555;
    }

    #file-type-selector {
      margin-top: 10px;
    }

    #export-file-type {
      padding: 5px;
      border-radius: 3px;
      background-color: #333333;
      color: #ffffff;
      border: none;
    }
  </style>
</head>

<body>

  <div id="editor-container">
    <div id="editor"></div>
  </div>

  <div id="file-selector">
    <label>Files</label>
    <label for="file-input">Upload File</label>
    <input type="file" id="file-input" accept=".txt, .html, .js, .css, .py, .json, .scss" />

    <ul id="file-list"></ul>
  </div>

  <div id="file-type-selector">
    <label for="export-file-type">Export File Type:</label>
    <select id="export-file-type">
      <option value="txt">Text (.txt)</option>
      <option value="html">HTML (.html)</option>
      <option value="js">JavaScript (.js)</option>
      <option value="css">CSS (.css)</option>
      <option value="py">Python (.py)</option>
      <option value="json">JSON (.json)</option>
      <option value="scss">SCSS (.scss)</option>
    </select>
  </div>

  <div id="credits">
    <p>SubliminalCode - Made by SubliminalBypass || Inspired by headlined || https://www.github.com/headlined || Â©Copyright 2024, All rights reserved.</p>
  </div>

  <div id="export-button">
    <button onclick="exportCode()">Export Code</button>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ext-language_tools.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  <script>
    var editor = ace.edit("editor");
    editor.setTheme("ace/theme/monokai");

    var fileList = document.getElementById("file-list");
    var fileTypeSelector = document.getElementById("export-file-type");
    var fileInput = document.getElementById("file-input");

    document.getElementById("file-input").addEventListener("change", function (event) {
      const files = event.target.files;

      for (let i = 0; files && i < files.length; i++) {
        const file = files[i];
        const fileExtension = file.name.split('.').pop().toLowerCase();

        const listItem = document.createElement("li");
        listItem.className = "file-item";
        listItem.textContent = file.name;

        const removeButton = document.createElement("button");
        removeButton.className = "remove-button";
        removeButton.textContent = "Remove";
        removeButton.addEventListener("click", function (e) {
          e.stopPropagation();
          removeFile(listItem);
        });

        listItem.appendChild(removeButton);

        listItem.addEventListener("click", function () {
          loadFile(file);
        });

        fileList.appendChild(listItem);

        if (i === 0) {
          loadFile(file);
        }

        // Determine mode based on file extension
        switch (fileExtension) {
          case "js":
            editor.session.setMode("ace/mode/javascript");
            break;
          case "html":
            editor.session.setMode("ace/mode/html");
            break;
          case "css":
            editor.session.setMode("ace/mode/css");
            break;
          case "py":
            editor.session.setMode("ace/mode/python");
            break;
          case "json":
            editor.session.setMode("ace/mode/json");
            break;
          case "scss":
            editor.session.setMode("ace/mode/scss");
            break;
          // Add more cases for other supported languages
          // ...

          default:
            // Set a default mode or handle unsupported file types
            editor.session.setMode("ace/mode/text");
            break;
        }
      }

      // Clear the file input to allow re-adding the same file
      fileInput.value = "";
    });

    function removeFile(item) {
      fileList.removeChild(item);
      // Implement any additional logic for removing the file from the editor if needed
    }

    function loadFile(file) {
      const reader = new FileReader();
      reader.onload = function (e) {
        editor.setValue(e.target.result);
      };
      reader.readAsText(file);
    }

    function exportCode() {
      const codeToExport = editor.getValue();
      const selectedFileType = fileTypeSelector.value;
      const blob = new Blob([codeToExport], { type: "text/plain;charset=utf-8" });
      saveAs(blob, "exported_code." + selectedFileType);
    }

    // SaveAs function for creating a download link
    function saveAs(blob, filename) {
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = filename;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }
  </script>
</body>

</html>
